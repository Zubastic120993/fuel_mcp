# ï¿½ï¿½ Fuel MCP â€” **v1.0.3 Polish Phase Plan**

**Maintainer:** Chief Engineer *Volodymyr Zub*  
**Branch:** `feature/schema-unification-v1.0.3`  
**Date:** 2025-10-31  
**Goal:** Finalize API schema unification, add CLI tools, and extend parser logic before GUI/Docker integration.

---

## âš™ï¸ **Phase Objective**

> Standardize all API responses, extend NLP query recognition, and introduce local CLI maintenance commands for developers.

---

## ğŸ”¹ 1. Unified Response Schema

| Task | Description | Status |
|------|--------------|--------|
| **Add `_meta` to error responses** | Ensure failed API calls also return `_meta` (timestamp, query, mode) | â³ Pending |
| **Normalize success/error JSON structure** | Follow single schema `{success, query, mode, result, _meta}` | â³ Pending |
| **Add pytest coverage** | Validate uniform response structure | â³ Pending |

---

## ğŸ”¹ 2. CLI Maintenance Tools

| Command | Description | Status |
|----------|--------------|--------|
| **mcp db-purge** | Safely clears local `/data/mcp_history.db` and logs | â³ Pending |
| **mcp test** | Runs pytest suite and reports summary | â³ Pending |
| **mcp status** | Displays current version, DB size, uptime | â³ Pending |

---

## ğŸ”¹ 3. Regex Parser Expansion

| Task | Description | Status |
|------|--------------|--------|
| **Multi-unit parsing** | Handle queries like â€œconvert 500 L diesel at 30Â°Câ€ | â³ Pending |
| **Density auto-inference** | Load default density from JSON | â³ Pending |
| **Enhanced error handling** | Graceful fallback when missing units or temperature | â³ Pending |

---

## ğŸ”¹ 4. Data & Config Enhancements

| File | Purpose | Status |
|------|----------|--------|
| **fuel_mcp/data/fuel_density.json** | Store default densities per product | â³ Pending |
| **fuel_mcp/core/cli_tools.py** | Define CLI logic and safety checks | â³ Pending |
| **pytest JSON output â†’ logs/test_results.json** | Add test summary export | â³ Pending |

---

## ğŸ”¹ 5. New /info Endpoint

| Task | Description | Status |
|------|--------------|--------|
| **Add endpoint** | `/info` returns short API + system overview (version, uptime, OS, DB size) | â³ Pending |
| **Add test file** | `tests/test_api_info.py` to verify structure & response time | â³ Pending |

---

## ğŸ”¹ 6. Documentation & Automation

| Task | Description | Status |
|------|--------------|--------|
| **Export OpenAPI snapshot** | Generate `docs/api_schema_v1.0.3.json` | â³ Pending |
| **Add Makefile target `make openapi`** | Automate schema export | âœ… Done in v1.0.2 base |
| **Update developer Makefile** | Include `make polish` for this phase | â³ Pending |

---

## ğŸ“… **Version Targets**

| Version | Focus | Tag |
|----------|--------|-----|
| **v1.0.3-rc1** | Unified schema + CLI tools | ï¿½ï¿½ Next milestone |
| **v1.0.3-final** | OpenAPI + test reporting + parser polish | Later |
| **v1.1.0-gui** | Flask/Gradio GUI + Docker image | Planned |

---

## ğŸ§¾ **Next Git Steps**

```bash
git checkout -b feature/schema-unification-v1.0.3
git add docs/v1.0.3_polish_plan.md
git commit -m "ğŸ§© Added v1.0.3 Polish Plan â€” schema unification + CLI roadmap"
git push origin feature/schema-unification-v1.0.3
